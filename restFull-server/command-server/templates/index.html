{% extends "bootstrap/base.html" %}
{% block metas %}
    <meta charset="UTF-8">
{% endblock %}

{% block scripts %}
    {{super()}}
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap.min.js"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='script/sweetalert.min.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='script/process_history.js') }}"></script>
{% endblock %}

{% block styles %}
    {{super()}}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
{% endblock %}

{% block navbar %}

{% endblock %}

{% block title %}Operation tasks{% endblock %}
{% block content %}
<div class="container">
  <div id ="alter_msg">
      <br><br>
  </div>
  <form class="form-group" id="task_history">
      <div class="form-group">
          <label class="font-weight-bold" for="history_table">┬──┬ ノ( ゜-゜ノ) TASK HISTORY (╯°□°）╯︵ ┻━┻</label>
              <table id="history_table" class="table table-striped">
                        <thead>
                          <tr>
                            <th scope="col">No.</th>
                            <th scope="col">Task ID</th>
                            <th scope="col">Status</th>
                            <th scope="col">Console</th>
                            <th scope="col">Result</th>
                            <th scope="col">Run script</th>
                            <th scope="col">Timestamp</th>
                          </tr>
                        </thead>
                        <tbody id="tasks_record">
                          {% for t in tasks %}
                          <tr>
                            <td>{{ loop.index }}</td>
                            <td>{{ t }}</td>
                            <td>{{ tasks[t]["status"]}}</td>
                            <td>{{ tasks[t]["console"]}}</td>
                            <td>{{ tasks[t]["result"]}}</td>
                            <td>{{ tasks[t]["script"]}}</td>
                            <td>{{ tasks[t]["timestamp"]}}</td>
                        </tr>
                          {% endfor %}
                        </tbody>
              </table>
      </div>
          <button type="submit" class="btn btn-primary">clear history</button>
      </form>
</div>
{% endblock %}

